{"ast":null,"code":"\"use strict\";\n\nconst utils = require(\"./utils\");\n// Method for formatting HTTP body for the multipart/form-data specification\n// Mostly taken from Fermata.js\n// https://github.com/natevw/fermata/blob/5d9732a33d776ce925013a265935facd1626cc88/fermata.js#L315-L343\nconst multipartDataGenerator = (method, data, headers) => {\n  const segno = (Math.round(Math.random() * 1e16) + Math.round(Math.random() * 1e16)).toString();\n  headers['Content-Type'] = `multipart/form-data; boundary=${segno}`;\n  const textEncoder = new TextEncoder();\n  let buffer = new Uint8Array(0);\n  const endBuffer = textEncoder.encode('\\r\\n');\n  function push(l) {\n    const prevBuffer = buffer;\n    const newBuffer = l instanceof Uint8Array ? l : new Uint8Array(textEncoder.encode(l));\n    buffer = new Uint8Array(prevBuffer.length + newBuffer.length + 2);\n    buffer.set(prevBuffer);\n    buffer.set(newBuffer, prevBuffer.length);\n    buffer.set(endBuffer, buffer.length - 2);\n  }\n  function q(s) {\n    return `\"${s.replace(/\"|\"/g, '%22').replace(/\\r\\n|\\r|\\n/g, ' ')}\"`;\n  }\n  const flattenedData = utils.flattenAndStringify(data);\n  for (const k in flattenedData) {\n    const v = flattenedData[k];\n    push(`--${segno}`);\n    if (Object.prototype.hasOwnProperty.call(v, 'data')) {\n      const typedEntry = v;\n      push(`Content-Disposition: form-data; name=${q(k)}; filename=${q(typedEntry.name || 'blob')}`);\n      push(`Content-Type: ${typedEntry.type || 'application/octet-stream'}`);\n      push('');\n      push(typedEntry.data);\n    } else {\n      push(`Content-Disposition: form-data; name=${q(k)}`);\n      push('');\n      push(v);\n    }\n  }\n  push(`--${segno}--`);\n  return buffer;\n};\nfunction multipartRequestDataProcessor(method, data, headers, callback) {\n  data = data || {};\n  if (method !== 'POST') {\n    return callback(null, utils.stringifyRequestData(data));\n  }\n  this._stripe._platformFunctions.tryBufferData(data).then(bufferedData => {\n    const buffer = multipartDataGenerator(method, bufferedData, headers);\n    return callback(null, buffer);\n  }).catch(err => callback(err, null));\n}\nmodule.exports = {\n  multipartRequestDataProcessor: multipartRequestDataProcessor\n};","map":{"version":3,"names":["utils","require","multipartDataGenerator","method","data","headers","segno","Math","round","random","toString","textEncoder","TextEncoder","buffer","Uint8Array","endBuffer","encode","push","l","prevBuffer","newBuffer","length","set","q","s","replace","flattenedData","flattenAndStringify","k","v","Object","prototype","hasOwnProperty","call","typedEntry","name","type","multipartRequestDataProcessor","callback","stringifyRequestData","_stripe","_platformFunctions","tryBufferData","then","bufferedData","catch","err","module","exports"],"sources":["C:/Users/Nikita/Stack Overflow Clone/Client/client/node_modules/stripe/lib/multipart.js"],"sourcesContent":["\"use strict\";\nconst utils = require(\"./utils\");\n// Method for formatting HTTP body for the multipart/form-data specification\n// Mostly taken from Fermata.js\n// https://github.com/natevw/fermata/blob/5d9732a33d776ce925013a265935facd1626cc88/fermata.js#L315-L343\nconst multipartDataGenerator = (method, data, headers) => {\n    const segno = (Math.round(Math.random() * 1e16) + Math.round(Math.random() * 1e16)).toString();\n    headers['Content-Type'] = `multipart/form-data; boundary=${segno}`;\n    const textEncoder = new TextEncoder();\n    let buffer = new Uint8Array(0);\n    const endBuffer = textEncoder.encode('\\r\\n');\n    function push(l) {\n        const prevBuffer = buffer;\n        const newBuffer = l instanceof Uint8Array ? l : new Uint8Array(textEncoder.encode(l));\n        buffer = new Uint8Array(prevBuffer.length + newBuffer.length + 2);\n        buffer.set(prevBuffer);\n        buffer.set(newBuffer, prevBuffer.length);\n        buffer.set(endBuffer, buffer.length - 2);\n    }\n    function q(s) {\n        return `\"${s.replace(/\"|\"/g, '%22').replace(/\\r\\n|\\r|\\n/g, ' ')}\"`;\n    }\n    const flattenedData = utils.flattenAndStringify(data);\n    for (const k in flattenedData) {\n        const v = flattenedData[k];\n        push(`--${segno}`);\n        if (Object.prototype.hasOwnProperty.call(v, 'data')) {\n            const typedEntry = v;\n            push(`Content-Disposition: form-data; name=${q(k)}; filename=${q(typedEntry.name || 'blob')}`);\n            push(`Content-Type: ${typedEntry.type || 'application/octet-stream'}`);\n            push('');\n            push(typedEntry.data);\n        }\n        else {\n            push(`Content-Disposition: form-data; name=${q(k)}`);\n            push('');\n            push(v);\n        }\n    }\n    push(`--${segno}--`);\n    return buffer;\n};\nfunction multipartRequestDataProcessor(method, data, headers, callback) {\n    data = data || {};\n    if (method !== 'POST') {\n        return callback(null, utils.stringifyRequestData(data));\n    }\n    this._stripe._platformFunctions\n        .tryBufferData(data)\n        .then((bufferedData) => {\n        const buffer = multipartDataGenerator(method, bufferedData, headers);\n        return callback(null, buffer);\n    })\n        .catch((err) => callback(err, null));\n}\nmodule.exports = {\n    multipartRequestDataProcessor: multipartRequestDataProcessor,\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}